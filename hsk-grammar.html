<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinese Grammar Flashcards (Thai)</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen flex flex-col items-center p-4">
    <div id="root" class="w-full flex flex-col items-center">
        <!-- React app will be mounted here -->
    </div>

    <!-- React and ReactDOM CDNs -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX transformation in browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;

        // HSK Grammar Data (HSK 1-4) with Thai placeholders
        const grammarData = {
            'hsk1': [
                { id: 'hsk1-shi', pattern: '是...', explanation: '[คำอธิบายภาษาไทย: ใช้เชื่อมคำนามหรือคำสรรพนาม เพื่อระบุตัวตน การจัดประเภท หรือการตัดสิน สามารถปฏิเสธได้ด้วย 不 (bù)]', examples: [
                    { chinese: '我是学生。', pinyin: 'Wǒ shì xuéshēng.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันเป็นนักเรียน]' },
                    { chinese: '他不是老师。', pinyin: 'Tā bú shì lǎoshī.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาไม่ใช่ครู]' },
                    { chinese: '这是我的书。', pinyin: 'Zhè shì wǒ de shū.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: นี่คือหนังสือของฉัน]' }
                ]},
                { id: 'hsk1-bu', pattern: '不 + Verb/Adjective', explanation: '[คำอธิบายภาษาไทย: ใช้ปฏิเสธคำกริยาหรือคำคุณศัพท์ หมายถึง "ไม่" หรือ "ไม่ใช่"]', examples: [
                    { chinese: '我不好。', pinyin: 'Wǒ bù hǎo.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันไม่สบาย]' },
                    { chinese: '他不去学校。', pinyin: 'Tā bú qù xuéxiào.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาไม่ไปโรงเรียน]' },
                    { chinese: '我不喜欢咖啡。', pinyin: 'Wǒ bù xǐhuān kāfēi.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันไม่ชอบกาแฟ]' }
                ]},
                { id: 'hsk1-ma', pattern: '...吗?', explanation: '[คำอธิบายภาษาไทย: คำเสริมท้ายประโยคคำถามแบบใช่/ไม่ใช่ วางไว้ท้ายประโยคบอกเล่าเพื่อให้เป็นคำถาม]', examples: [
                    { chinese: '你是中国人吗？', pinyin: 'Nǐ shì Zhōngguó rén ma?', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: คุณเป็นคนจีนไหม]' },
                    { chinese: '她喜欢吃米饭吗？', pinyin: 'Tā xǐhuān chī mǐfàn ma?', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เธอชอบกินข้าวไหม]' }
                ]},
                { id: 'hsk1-ne', pattern: '...呢?', explanation: '[คำอธิบายภาษาไทย: คำเสริมท้ายประโยคคำถามที่ใช้ถามว่า "แล้ว...ล่ะ?" หรือสอบถามตำแหน่งของบุคคล/สิ่งของที่กล่าวถึงไปแล้ว]', examples: [
                    { chinese: '我很好，你呢？', pinyin: 'Wǒ hěn hǎo, nǐ ne?', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันสบายดี แล้วคุณล่ะ]' },
                    { chinese: '我的书在这里，你的呢？', pinyin: 'Wǒ de shū zài zhèlǐ, nǐ de ne?', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: หนังสือของฉันอยู่ที่นี่ แล้วของคุณล่ะ]' }
                ]},
                { id: 'hsk1-hen', pattern: '很 + Adjective', explanation: '[คำอธิบายภาษาไทย: ใช้หน้าคำคุณศัพท์เพื่อแสดงระดับความเข้มข้น มักแปลว่า "มาก" แต่อาจใช้เพื่อทำให้คำคุณศัพท์ดูอ่อนลงก็ได้ มักใช้แม้ว่าจะไม่ได้เน้นคำว่า "มาก" ก็ตาม]', examples: [
                    { chinese: '她很高兴。', pinyin: 'Tā hěn gāoxìng.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เธอมีความสุขมาก]' },
                    { chinese: '这个苹果很好吃。', pinyin: 'Zhège píngguǒ hěn hǎochī.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: แอปเปิ้ลลูกนี้อร่อยมาก]' }
                ]},
                { id: 'hsk1-you', pattern: '有', explanation: '[คำอธิบายภาษาไทย: มี; มีอยู่/เป็นอยู่ ปฏิเสธด้วย 没有 (méiyǒu)]', examples: [
                    { chinese: '我有一个妹妹。', pinyin: 'Wǒ yǒu yī gè mèimei.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันมีน้องสาวหนึ่งคน]' },
                    { chinese: '桌子上没有水。', pinyin: 'Zhuōzi shàng méiyǒu shuǐ.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: บนโต๊ะไม่มีน้ำ]' }
                ]},
                { id: 'hsk1-zai', pattern: '在 + Place', explanation: '[คำอธิบายภาษาไทย: บ่งบอกตำแหน่งหรือการมีอยู่ ณ สถานที่นั้นๆ โครงสร้างคือ ประธาน + 在 + สถานที่]', examples: [
                    { chinese: '他在学校。', pinyin: 'Tā zài xuéxiào.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาอยู่ที่โรงเรียน]' },
                    { chinese: '我的朋友在北京。', pinyin: 'Wǒ de péngyou zài Běijīng.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เพื่อนของฉันอยู่ที่ปักกิ่ง]' }
                ]},
                { id: 'hsk1-qu-lai', pattern: '去 / 来', explanation: '[คำอธิบายภาษาไทย: คำกริยาบอกทิศทาง 去 (qù) หมายถึง "ไป" (ออกจากผู้พูด), 来 (lái) หมายถึง "มา" (เข้าหาผู้พูด)]', examples: [
                    { chinese: '你去哪儿？', pinyin: 'Nǐ qù nǎr?', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: คุณจะไปไหน]' },
                    { chinese: '他来我家。', pinyin: 'Tā lái wǒ jiā.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขามาที่บ้านของฉัน]' }
                ]},
                { id: 'hsk1-de', pattern: '的', explanation: '[คำอธิบายภาษาไทย: คำเสริมแสดงความเป็นเจ้าของ ใช้หลังคำสรรพนามหรือคำนามเพื่อแสดงความเป็นเจ้าของหรือความสัมพันธ์เชิงบรรยาย]', examples: [
                    { chinese: '这是我的书。', pinyin: 'Zhè shì wǒ de shū.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: นี่คือหนังสือของฉัน]' },
                    { chinese: '她是一个漂亮的女孩。', pinyin: 'Tā shì yī gè piàoliang de nǚhái.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เธอเป็นผู้หญิงที่สวย]' }
                ]},
                { id: 'hsk1-he', pattern: '和', explanation: '[คำอธิบายภาษาไทย: คำสันธาน "และ" ใช้เชื่อมคำนาม คำสรรพนาม หรือวลี ไม่สามารถเชื่อมคำกริยาหรืออนุประโยคได้โดยตรง]', examples: [
                    { chinese: '我和他都是学生。', pinyin: 'Wǒ hé tā dōu shì xuéshēng.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันกับเขาทั้งคู่เป็นนักเรียน]' },
                    { chinese: '我喜欢吃米饭和菜。', pinyin: 'Wǒ xǐhuān chī mǐfàn hé cài.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันชอบกินข้าวและกับข้าว]' }
                ]},
                { id: 'hsk1-duoshao-ji', pattern: '多少 / 几', explanation: '[คำอธิบายภาษาไทย: ทั้งคู่ถามว่า "เท่าไหร่/กี่" 几 (jǐ) ใช้สำหรับจำนวนน้อย (ปกติ 1-10) หรือเมื่อคาดว่าจำนวนจะน้อย 多少 (duōshao) ใช้สำหรับปริมาณที่ไม่ทราบจำนวนที่มากกว่า]', examples: [
                    { chinese: '你家有几口人？', pinyin: 'Nǐ jiā yǒu jǐ kǒu rén?', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: บ้านคุณมีกี่คน]' },
                    { chinese: '这个学校有多少学生？', pinyin: 'Zhège xuéxiào yǒu duōshao xuéshēng?', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: โรงเรียนนี้มีนักเรียนกี่คน]' }
                ]},
                { id: 'hsk1-zenme', pattern: '怎么?', explanation: '[คำอธิบายภาษาไทย: ถามว่า "อย่างไร?" หรือ "ทำไม?" ใช้สอบถามเกี่ยวกับลักษณะ วิธีการ หรือเหตุผล]', examples: [
                    { chinese: '这个字怎么写？', pinyin: 'Zhège zì zěnme xiě？', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ตัวอักษรนี้เขียนอย่างไร]' },
                    { chinese: '你怎么了？', pinyin: 'Nǐ zěnme le？', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: คุณเป็นอะไรไป]' }
                ]},
                { id: 'hsk1-shenme', pattern: '什么?', explanation: '[คำอธิบายภาษาไทย: ถามว่า "อะไร?" ใช้สอบถามเกี่ยวกับสิ่งของ การกระทำ หรือคุณลักษณะ]', examples: [
                    { chinese: '你叫什么名字？', pinyin: 'Nǐ jiào shénme míngzi？', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: คุณชื่ออะไร]' },
                    { chinese: '这是什么？', pinyin: 'Zhè shì shénme？', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: นี่คืออะไร]' }
                ]},
                { id: 'hsk1-shei', pattern: '谁?', explanation: '[คำอธิบายภาษาไทย: ถามว่า "ใคร?" ใช้สอบถามเกี่ยวกับบุคคล]', examples: [
                    { chinese: '他是谁？', pinyin: 'Tā shì shéi？', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาคือใคร]' },
                    { chinese: '谁喜欢喝茶？', pinyin: 'Shéi xǐhuān hē chá？', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ใครชอบดื่มชา]' }
                ]},
                { id: 'hsk1-nar', pattern: '哪儿?', explanation: '[คำอธิบายภาษาไทย: ถามว่า "ที่ไหน?" ใช้สอบถามเกี่ยวกับสถานที่]', examples: [
                    { chinese: '你去哪儿？', pinyin: 'Nǐ qù nǎr？', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: คุณจะไปที่ไหน]' },
                    { chinese: '你的家在哪儿？', pinyin: 'Nǐ de jiā zài nǎr？', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: บ้านของคุณอยู่ที่ไหน]' }
                ]},
                { id: 'hsk1-taile', pattern: '太...了', explanation: '[คำอธิบายภาษาไทย: บ่งบอกระดับที่มากเกินไป มักแปลว่า "เกินไป..." อาจเป็นบวกหรือลบขึ้นอยู่กับบริบท]', examples: [
                    { chinese: '这个太大了。', pinyin: 'Zhège tài dà le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: อันนี้ใหญ่เกินไป]' },
                    { chinese: '今天太热了。', pinyin: 'Jīntiān tài rè le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: วันนี้ร้อนเกินไป]' }
                ]},
                { id: 'hsk1-le', pattern: '了', explanation: '[คำอธิบายภาษาไทย: คำเสริมแสดงความสมบูรณ์ บ่งบอกการเสร็จสิ้นหรือการเกิดขึ้นของการกระทำ หรือการเปลี่ยนแปลงสถานะ]', examples: [
                    { chinese: '我吃饭了。', pinyin: 'Wǒ chī fàn le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันกินข้าวแล้ว]' },
                    { chinese: '下雨了。', pinyin: 'Xià yǔ le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฝนตกแล้ว (หรือเริ่มตกแล้ว)]' }
                ]},
            ],
            'hsk2': [
                { id: 'hsk2-hui', pattern: '会', explanation: '[คำอธิบายภาษาไทย: สามารถ (ความสามารถที่เรียนรู้จากการศึกษา/ฝึกฝน); จะ (กาลอนาคตหรือความเป็นไปได้)]', examples: [
                    { chinese: '我会说汉语。', pinyin: 'Wǒ huì shuō Hànyǔ.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันพูดภาษาจีนได้]' },
                    { chinese: '明天会下雨。', pinyin: 'Míngtiān huì xià yǔ.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: พรุ่งนี้ฝนจะตก]' }
                ]},
                { id: 'hsk2-xiang', pattern: '想', explanation: '[คำอธิบายภาษาไทย: ต้องการ; คิด; คิดถึง (ใครบางคน)]', examples: [
                    { chinese: '我想去中国。', pinyin: 'Wǒ xiǎng qù Zhōngguó.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันอยากไปประเทศจีน]' },
                    { chinese: '我想你。', pinyin: 'Wǒ xiǎng nǐ.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันคิดถึงคุณ]' }
                ]},
                { id: 'hsk2-yao', pattern: '要', explanation: '[คำอธิบายภาษาไทย: ต้องการ; กำลังจะ; ต้อง ความปรารถนาหรือความตั้งใจที่แรงกว่า 想 (xiǎng)]', examples: [
                    { chinese: '我要买一个新手机。', pinyin: 'Wǒ yào mǎi yī gè xīn shǒujī.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันต้องการซื้อโทรศัพท์ใหม่หนึ่งเครื่อง]' },
                    { chinese: '他要来我家。', pinyin: 'Tā yào lái wǒ jiā.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขากำลังจะมาบ้านฉัน]' }
                ]},
                { id: 'hsk2-neng', pattern: '能', explanation: '[คำอธิบายภาษาไทย: สามารถ (ความสามารถทางกายภาพหรือความเป็นไปได้)]', examples: [
                    { chinese: '我能看见你。', pinyin: 'Wǒ néng kànjiàn nǐ.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันมองเห็นคุณได้]' },
                    { chinese: '你现在能来吗？', pinyin: 'Nǐ xiànzài néng lái ma?', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ตอนนี้คุณมาได้ไหม]' }
                ]},
                { id: 'hsk2-keyi', pattern: '可以', explanation: '[คำอธิบายภาษาไทย: สามารถ (ได้รับอนุญาต)]', examples: [
                    { chinese: '我可以用你的电脑吗？', pinyin: 'Wǒ kěyǐ yòng nǐ de diànnǎo ma?', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันขอใช้คอมพิวเตอร์ของคุณได้ไหม]' },
                    { chinese: '你现在可以走了。', pinyin: 'Nǐ xiànzài kěyǐ zǒu le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ตอนนี้คุณไปได้แล้ว]' }
                ]},
                { id: 'hsk2-zai-ne', pattern: '在...呢', explanation: '[คำอธิบายภาษาไทย: บ่งบอกว่าการกระทำกำลังดำเนินอยู่]', examples: [
                    { chinese: '他正在睡觉呢。', pinyin: 'Tā zhèngzài shuìjiào ne.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขากำลังนอนอยู่]' },
                    { chinese: '我吃饭呢。', pinyin: 'Wǒ chīfàn ne.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันกำลังกินข้าวอยู่]' }
                ]},
                { id: 'hsk2-guo', pattern: '过', explanation: '[คำอธิบายภาษาไทย: คำเสริมแสดงประสบการณ์ บ่งบอกว่าการกระทำนั้นเคยเกิดขึ้นในอดีต]', examples: [
                    { chinese: '我吃过中国菜。', pinyin: 'Wǒ chī guo Zhōngguó cài.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันเคยกินอาหารจีน]' },
                    { chinese: '他去过北京。', pinyin: 'Tā qù guo Běijīng.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาเคยไปปักกิ่ง]' }
                ]},
                { id: 'hsk2-yidianr', pattern: '一点儿', explanation: '[คำอธิบายภาษาไทย: นิดหน่อย ใช้หลังคำคุณศัพท์เพื่อแสดงระดับเล็กน้อย หรือหลังคำกริยาเพื่อแสดงปริมาณการกระทำเล็กน้อย]', examples: [
                    { chinese: '我有点儿累。', pinyin: 'Wǒ yǒudiǎnr lèi.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันเหนื่อยเล็กน้อย]' },
                    { chinese: '请给我一点儿水。', pinyin: 'Qǐng gěi wǒ yīdiǎnr shuǐ.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: กรุณาให้น้ำฉันหน่อย]' }
                ]},
                { id: 'hsk2-bi', pattern: 'A 比 B + Adjective', explanation: '[คำอธิบายภาษาไทย: โครงสร้างการเปรียบเทียบ หมายถึง "A [คำคุณศัพท์] กว่า B"]', examples: [
                    { chinese: '他比我高。', pinyin: 'Tā bǐ wǒ gāo.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาสูงกว่าฉัน]' },
                    { chinese: '今天比昨天热。', pinyin: 'Jīntiān bǐ zuótiān rè.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: วันนี้ร้อนกว่าเมื่อวาน]' }
                ]},
                { id: 'hsk2-de-complement', pattern: 'Verb + 得 + Adjective/Adverb', explanation: '[คำอธิบายภาษาไทย: คำเสริมโครงสร้าง ใช้หลังคำกริยาเพื่ออธิบายลักษณะหรือผลลัพธ์ของการกระทำ]', examples: [
                    { chinese: '他说汉语说得很好。', pinyin: 'Tā shuō Hànyǔ shuō de hěn hǎo.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาพูดภาษาจีนได้ดีมาก]' },
                    { chinese: '她跑得很快。', pinyin: 'Tā pǎo de hěn kuài.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เธอวิ่งเร็วมาก]' }
                ]},
                { id: 'hsk2-zhe', pattern: '着', explanation: '[คำอธิบายภาษาไทย: สภาพต่อเนื่อง บ่งบอกสถานะหรือการกระทำที่ต่อเนื่อง คล้ายกับ "-ing" ในภาษาอังกฤษ]', examples: [
                    { chinese: '门开着。', pinyin: 'Mén kāizhe.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ประตูเปิดอยู่]' },
                    { chinese: '他穿着一件红衣服。', pinyin: 'Tā chuānzhe yī jiàn hóng yīfu.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขากำลังใส่เสื้อสีแดง]' }
                ]},
                { id: 'hsk2-gen-yiqi', pattern: '跟...一起', explanation: '[คำอธิบายภาษาไทย: ด้วยกันกับ... ใช้บ่งบอกว่าการกระทำทำร่วมกับใครบางคน]', examples: [
                    { chinese: '我跟朋友一起去商店。', pinyin: 'Wǒ gēn péngyou yīqǐ qù shāngdiàn.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันไปร้านค้ากับเพื่อน]' },
                    { chinese: '我们一起学习汉语。', pinyin: 'Wǒmen yīqǐ xuéxí Hànyǔ.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: พวกเราเรียนภาษาจีนด้วยกัน]' }
                ]},
                { id: 'hsk2-cong-dao', pattern: '从...到...', explanation: '[คำอธิบายภาษาไทย: จาก...ถึง... ใช้บ่งบอกช่วงเวลาหรือสถานที่]', examples: [
                    { chinese: '从家到学校很远。', pinyin: 'Cóng jiā dào xuéxiào hěn yuǎn.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: จากบ้านถึงโรงเรียนไกลมาก]' },
                    { chinese: '我从早上八点工作到晚上五点。', pinyin: 'Wǒ cóng zǎoshang bā diǎn gōngzuò dào wǎnshang wǔ diǎn.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันทำงานตั้งแต่แปดโมงเช้าถึงห้าโมงเย็น]' }
                ]},
                { id: 'hsk2-li-yuan-jin', pattern: '离...远/近', explanation: '[คำอธิบายภาษาไทย: ไกล/ใกล้จาก... ใช้เพื่ออธิบายระยะห่างระหว่างสองสถานที่]', examples: [
                    { chinese: '我家离学校很近。', pinyin: 'Wǒ jiā lí xuéxiào hěn jìn.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: บ้านฉันอยู่ใกล้โรงเรียนมาก]' },
                    { chinese: '火车站离这里远吗？', pinyin: 'Huǒchēzhàn lí zhèlǐ yuǎn ma?', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: สถานีรถไฟอยู่ไกลจากที่นี่ไหม]' }
                ]},
                { id: 'hsk2-suiran-danshi', pattern: '虽然...但是...', explanation: '[คำอธิบายภาษาไทย: ถึงแม้ว่า...แต่... ใช้เพื่อแสดงการยอมรับหรือความขัดแย้ง]', examples: [
                    { chinese: '虽然下雨了，但是我们还是要去。', pinyin: 'Suīrán xià yǔ le, dànshì wǒmen háishì yào qù.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: แม้ว่าฝนจะตก แต่เราก็ยังจะไป]' },
                    { chinese: '虽然他很忙，但是他很高兴。', pinyin: 'Suīrán tā hěn máng, dànshì tā hěn gāoxìng.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: แม้ว่าเขาจะยุ่งมาก แต่เขาก็มีความสุขมาก]' }
                ]},
                { id: 'hsk2-yinwei-suoyi', pattern: '因为...所以...', explanation: '[คำอธิบายภาษาไทย: เพราะว่า...ดังนั้น... ใช้เพื่อแสดงเหตุและผล]', examples: [
                    { chinese: '因为下雨，所以我没去。', pinyin: 'Yīnwèi xià yǔ, suǒyǐ wǒ méi qù.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เพราะฝนตก ดังนั้นฉันจึงไม่ได้ไป]' },
                    { chinese: '因为他生病了，所以不能来。', pinyin: 'Yīnwèi tā shēngbìng le, suǒyǐ bù néng lái.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เพราะเขาป่วย ดังนั้นจึงมาไม่ได้]' }
                ]},
                { id: 'hsk2-huozhe-haishi', pattern: '或者 / 还是', explanation: '[คำอธิบายภาษาไทย: ทั้งคู่หมายถึง "หรือ" 或者 (huòzhě) ใช้ในประโยคบอกเล่า ในขณะที่ 还是 (háishì) ใช้ในประโยคคำถาม]', examples: [
                    { chinese: '你喜欢喝咖啡或者茶？', pinyin: 'Nǐ xǐhuān hē kāfēi huòzhě chá？', english: '[คำแปลภาษาไทยของประประโยคตัวอย่าง: คุณชอบดื่มกาแฟหรือชา]' },
                    { chinese: '我们今天去商店还是去医院？', pinyin: 'Wǒmen jīntiān qù shāngdiàn háishì qù yīyuàn？', english: '[คำแปลภาษาไทยของประประโยคตัวอย่าง: วันนี้เราจะไปร้านค้าหรือไปโรงพยาบาล]' }
                ]},
            ],
            'hsk3': [
                { id: 'hsk3-ba', pattern: '把 (bǎ) structure', explanation: '[คำอธิบายภาษาไทย: ใช้บ่งบอกว่ากรรมของกริยาถูกจัดการหรือได้รับผลกระทบจากการกระทำ โครงสร้าง: ประธาน + 把 + กรรม + กริยา + ส่วนประกอบอื่นๆ]', examples: [
                    { chinese: '我把书放在桌子上。', pinyin: 'Wǒ bǎ shū fàng zài zhuōzi shàng.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันวางหนังสือไว้บนโต๊ะ]' },
                    { chinese: '请把门打开。', pinyin: 'Qǐng bǎ mén dǎkāi.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: กรุณาเปิดประตู]' }
                ]},
                { id: 'hsk3-bei', pattern: '被 (bèi) structure', explanation: '[คำอธิบายภาษาไทย: ใช้บ่งบอกโครงสร้างประโยคกรรมวาจก หมายถึงประธานถูกกระทำ โครงสร้าง: กรรม + 被 + ผู้กระทำ (ไม่บังคับ) + กริยา + ส่วนประกอบอื่นๆ]', examples: [
                    { chinese: '我的手机被他拿走了。', pinyin: 'Wǒ de shǒujī bèi tā ná zǒu le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: โทรศัพท์ของฉันถูกเขาเอาไปแล้ว]' },
                    { chinese: '花被风吹掉了。', pinyin: 'Huā bèi fēng chuī diào le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ดอกไม้ถูกลมพัดปลิวไปแล้ว]' }
                ]},
                { id: 'hsk3-qilai', pattern: 'Verb + 起来', explanation: '[คำอธิบายภาษาไทย: บ่งบอกการเริ่มต้นของการกระทำหรือการเคลื่อนที่ขึ้นไปข้างบน อาจบ่งบอกถึงความรู้สึกหรือการประเมินผลได้ด้วย]', examples: [
                    { chinese: '他笑起来了。', pinyin: 'Tā xiào qǐlái le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาเริ่มหัวเราะแล้ว]' },
                    { chinese: '这件衣服看起来很漂亮。', pinyin: 'Zhè jiàn yīfu kàn qǐlái hěn piàoliang.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เสื้อตัวนี้ดูสวยมาก]' }
                ]},
                { id: 'hsk3-xiaqu', pattern: 'Verb + 下去', explanation: '[คำอธิบายภาษาไทย: บ่งบอกการต่อเนื่องของการกระทำหรือการเคลื่อนที่ลงไปข้างล่าง]', examples: [
                    { chinese: '请你继续说下去。', pinyin: 'Qǐng nǐ jìxù shuō xiàqù.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: กรุณาพูดต่อไป]' },
                    { chinese: '雨一直下下去。', pinyin: 'Yǔ yīzhí xià xiàqù.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฝนตกต่อเนื่อง]' }
                ]},
                { id: 'hsk3-resultative', pattern: 'Verb + Resultative Complement', explanation: '[คำอธิบายภาษาไทย: คำเสริมบอกผลลัพธ์ อธิบายผลลัพธ์ของการกระทำ คำที่พบบ่อยได้แก่ 完 (wán - เสร็จ), 好 (hǎo - ทำดี), 懂 (dǒng - เข้าใจ), 见 (jiàn - เห็น)]', examples: [
                    { chinese: '我吃完饭了。', pinyin: 'Wǒ chī wán fàn le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันกินข้าวเสร็จแล้ว]' },
                    { chinese: '你看懂这本书了吗？', pinyin: 'Nǐ kàn dǒng zhè běn shū le ma?', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: คุณอ่านหนังสือเล่มนี้เข้าใจไหม]' }
                ]},
                { id: 'hsk3-chulai', pattern: 'Verb + 出来', explanation: '[คำอธิบายภาษาไทย: บ่งบอกการปรากฏ การแยกออก หรือการจดจำ/แยกแยะ]', examples: [
                    { chinese: '他从房间里走出来了。', pinyin: 'Tā cóng fángjiān lǐ zǒu chūlái le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาเดินออกมาจากห้องแล้ว]' },
                    { chinese: '我听出来他的声音了。', pinyin: 'Wǒ tīng chūlái tā de shēngyīn le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันฟังออกว่านั่นคือเสียงของเขา]' }
                ]},
                { id: 'hsk3-direction', pattern: 'Directional Complements (Simple)', explanation: '[คำอธิบายภาษาไทย: คำเสริมบอกทิศทาง ใช้หลังคำกริยาเพื่อบ่งบอกทิศทางการกระทำ (เช่น 进去 - เข้าไป, 出来 - ออกมา, 上去 - ขึ้นไป, 下来 - ลงมา)]', examples: [
                    { chinese: '请进房间来。', pinyin: 'Qǐng jìn fángjiān lái.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: กรุณาเข้ามาในห้อง]' },
                    { chinese: '他跑上去了。', pinyin: 'Tā pǎo shàngqù le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาวิ่งขึ้นไปแล้ว]' }
                ]},
                { id: 'hsk3-yuelaiyue', pattern: '越来越...', explanation: '[คำอธิบายภาษาไทย: มากขึ้นเรื่อยๆ... บ่งบอกการเปลี่ยนแปลงที่ก้าวหน้า]', examples: [
                    { chinese: '他越来越喜欢汉语了。', pinyin: 'Tā yuè lái yuè xǐhuān Hànyǔ le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาชอบภาษาจีนมากขึ้นเรื่อยๆ]' },
                    { chinese: '天气越来越冷了。', pinyin: 'Tiānqì yuè lái yuè lěng le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: อากาศหนาวขึ้นเรื่อยๆ]' }
                ]},
                { id: 'hsk3-chule-yiwai', pattern: '除了...以外, 都/也...', explanation: '[คำอธิบายภาษาไทย: นอกจาก...แล้ว, ทั้งหมด/ก็... ใช้เพื่อบ่งบอกข้อยกเว้นหรือการรวม]', examples: [
                    { chinese: '除了他以外，我们都来了。', pinyin: 'Chúle tā yǐwài, wǒmen dōu lái le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: นอกจากเขาแล้ว พวกเรามากันหมด]' },
                    { chinese: '除了英语，他还会说汉语。', pinyin: 'Chúle Yīngyǔ, tā hái huì shuō Hànyǔ.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: นอกจากภาษาอังกฤษแล้ว เขายังพูดภาษาจีนได้ด้วย]' }
                ]},
                { id: 'hsk3-bujin-erqie', pattern: '不仅...而且...', explanation: '[คำอธิบายภาษาไทย: ไม่เพียงแต่...แต่ยัง... ใช้เชื่อมอนุประโยคที่เกี่ยวข้องกันสองประโยค โดยเน้นประโยคหลัง]', examples: [
                    { chinese: '他不仅会说汉语，而且说得很好。', pinyin: 'Tā bùjǐn huì shuō Hànyǔ, érqiě shuō de hěn hǎo.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาไม่เพียงแต่พูดภาษาจีนได้ แต่ยังพูดได้ดีมากด้วย]' },
                    { chinese: '这个地方不仅漂亮，而且很安静。', pinyin: 'Zhège dìfang bùjǐn piàoliang, érqiě hěn ānjìng.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: สถานที่นี้ไม่เพียงแต่สวยงาม แต่ยังเงียบสงบอีกด้วย]' }
                ]},
                { id: 'hsk3-zhiyao-jiu', pattern: '只要...就...', explanation: '[คำอธิบายภาษาไทย: ตราบใดที่...ก็... บ่งบอกเงื่อนไขที่รับประกันผลลัพธ์]', examples: [
                    { chinese: '只要努力学习，就能考好。', pinyin: 'Zhǐyào nǔlì xuéxí, jiù néng kǎo hǎo.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ตราบใดที่ตั้งใจเรียน ก็จะสอบได้ดี]' },
                    { chinese: '只要有时间，我就会去旅游。', pinyin: 'Zhǐyào yǒu shíjiān, wǒ jiù huì qù lǚyóu.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ตราบใดที่มีเวลา ฉันก็จะไปเที่ยว]' }
                ]},
                { id: 'hsk3-zhiyou-cai', pattern: '只有...才...', explanation: '[คำอธิบายภาษาไทย: เพียงแค่...ถึงจะ... บ่งบอกเงื่อนไขที่จำเป็นเพื่อให้เกิดผลลัพธ์]', examples: [
                    { chinese: '只有努力，才能成功。', pinyin: 'Zhǐyǒu nǔlì, cái néng chénggōng.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เพียงแค่พยายาม ถึงจะประสบความสำเร็จ]' },
                    { chinese: '只有你告诉我，我才能知道。', pinyin: 'Zhǐyǒu nǐ gàosù wǒ, wǒ cái néng zhīdào.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เพียงแค่คุณบอกฉัน ฉันถึงจะรู้]' }
                ]},
                { id: 'hsk3-wulun-dou-ye', pattern: '无论...都/也...', explanation: '[คำอธิบายภาษาไทย: ไม่ว่า...ก็/ก็ยัง... บ่งบอกว่าผลลัพธ์ยังคงเหมือนเดิมไม่ว่าเงื่อนไขจะเป็นอย่างไร]', examples: [
                    { chinese: '无论天气怎么样，我都要去。', pinyin: 'Wúlùn tiānqì zěnmeyàng, wǒ dōu yào qù.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ไม่ว่าอากาศจะเป็นอย่างไร ฉันก็ยังจะไป]' },
                    { chinese: '无论多忙，他也会给我打电话。', pinyin: 'Wúlùn duō máng, tā yě huì gěi wǒ dǎ diànhuà.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ไม่ว่าจะยุ่งแค่ไหน เขาก็จะโทรหาฉัน]' }
                ]},
                { id: 'hsk3-shide', pattern: '是...的', explanation: '[คำอธิบายภาษาไทย: โครงสร้างเน้นย้ำ ใช้เพื่อเน้นเวลา สถานที่ ลักษณะ หรือผู้กระทำของการกระทำในอดีต]', examples: [
                    { chinese: '我是昨天来的。', pinyin: 'Wǒ shì zuótiān lái de.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันมาเมื่อวาน (เน้น "เมื่อวาน")]' },
                    { chinese: '他是在北京学的汉语。', pinyin: 'Tā shì zài Běijīng xué de Hànyǔ.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาเรียนภาษาจีนที่ปักกิ่ง (เน้น "ที่ปักกิ่ง")]' }
                ]},
                { id: 'hsk3-lian-dou-ye', pattern: '连...都/也...', explanation: '[คำอธิบายภาษาไทย: แม้แต่...ก็/ก็ยัง... ใช้เพื่อเน้นกรณีที่รุนแรง หมายถึง "แม้แต่ [สิ่งที่รุนแรง] ก็เป็นจริง ดังนั้นสิ่งอื่นๆ ก็เป็นจริงด้วย"]', examples: [
                    { chinese: '他连饭都没吃。', pinyin: 'Tā lián fàn dōu méi chī.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขายังไม่ได้กินข้าวเลย]' },
                    { chinese: '这么简单的问题，连孩子也知道。', pinyin: 'Zhème jiǎndān de wèntí, lián háizi yě zhīdào。', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ปัญหาที่ง่ายขนาดนี้ แม้แต่เด็กก็ยังรู้]' }
                ]},
                { id: 'hsk3-dui-ganxingqu', pattern: '对...感兴趣', explanation: '[คำอธิบายภาษาไทย: สนใจ... ใช้เพื่อแสดงความสนใจในบางสิ่งบางอย่าง]', examples: [
                    { chinese: '我对中国文化很感兴趣。', pinyin: 'Wǒ duì Zhōngguó wénhuà hěn gǎnxìngqù.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันสนใจวัฒนธรรมจีนมาก]' },
                    { chinese: '她对学汉语不感兴趣。', pinyin: 'Tā duì xué Hànyǔ bù gǎnxìngqù.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เธอไม่สนใจการเรียนภาษาจีน]' }
                ]},
                { id: 'hsk3-guanyu', pattern: '关于', explanation: '[คำอธิบายภาษาไทย: เกี่ยวกับ; เกี่ยวข้องกับ ใช้หน้าคำนามหรือคำสรรพนามเพื่อแนะนำหัวข้อ]', examples: [
                    { chinese: '这本书是关于历史的。', pinyin: 'Zhè běn shū shì guānyú lìshǐ de.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: หนังสือเล่มนี้เกี่ยวกับประวัติศาสตร์]' },
                    { chinese: '我们谈论了关于未来的计划。', pinyin: 'Wǒmen tánlùn le guānyú wèilái de jìhuà.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: พวกเราพูดคุยเกี่ยวกับแผนการในอนาคต]' }
                ]},
            ],
            'hsk4': [
                { id: 'hsk4-guolai-guoqu', pattern: 'Verb + 过来 / 过去 (Figurative)', explanation: '[คำอธิบายภาษาไทย: คำเสริมบอกทิศทางที่ใช้ในเชิงเปรียบเทียบเพื่อบ่งบอกการเปลี่ยนแปลงสถานะ การฟื้นตัว หรือความสามารถในการจัดการ 过来 (guòlái) มักหมายถึง "กลับมา, ฟื้นตัว", 过去 (guòqù) มักหมายถึง "ผ่านไป, ผ่านพ้นไป"]', examples: [
                    { chinese: '他终于醒过来了。', pinyin: 'Tā zhōngyú xǐng guòlái le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ในที่สุดเขาก็ตื่นขึ้นมา]' },
                    { chinese: '这个问题我还没想过去。', pinyin: 'Zhège wèntí wǒ hái méi xiǎng guòqù.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ปัญหานี้ฉันยังคิดไม่ตก]' }
                ]},
                { id: 'hsk4-diao', pattern: 'Verb + 掉', explanation: '[คำอธิบายภาษาไทย: บ่งบอกการกำจัด การเสร็จสิ้น หรือการทิ้งบางสิ่งบางอย่าง]', examples: [
                    { chinese: '他把旧衣服扔掉了。', pinyin: 'Tā bǎ jiù yīfu rēng diào le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาโยนเสื้อผ้าเก่าทิ้งไปแล้ว]' },
                    { chinese: '我的手机丢掉了。', pinyin: 'Wǒ de shǒujī diū diào le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: โทรศัพท์ของฉันหายไปแล้ว]' }
                ]},
                { id: 'hsk4-zhu', pattern: 'Verb + 住', explanation: '[คำอธิบายภาษาไทย: บ่งบอกความมั่นคง เสถียรภาพ หรือการหยุด/ยึดจับได้สำเร็จ]', examples: [
                    { chinese: '请你站住！', pinyin: 'Qǐng nǐ zhànzhù!', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: กรุณาหยุด! (ยืนนิ่งๆ!)]' },
                    { chinese: '我记住了他的名字。', pinyin: 'Wǒ jì zhù le tā de míngzi.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันจำชื่อเขาได้แล้ว]' }
                ]},
                { id: 'hsk4-qilai-evaluation', pattern: 'Verb + 起来 (Evaluation)', explanation: '[คำอธิบายภาษาไทย: ใช้เพื่อแสดงความรู้สึกหรือการประเมินจากสิ่งที่รับรู้ คล้ายกับ "ดูเหมือนว่า..." หรือ "ดู/ฟัง/รู้สึก..."]', examples: [
                    { chinese: '这首歌听起来很好听。', pinyin: 'Zhè shǒu gē tīng qǐlái hěn hǎotīng.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เพลงนี้ฟังดูเพราะมาก]' },
                    { chinese: '他看起来很累。', pinyin: 'Tā kàn qǐlái hěn lèi.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาดูเหนื่อยมาก]' }
                ]},
                { id: 'hsk4-de-bu-potential', pattern: 'Verb + 得/不 + Complement (Potential)', explanation: '[คำอธิบายภาษาไทย: บ่งบอกว่าการกระทำนั้นเป็นไปได้หรือไม่ที่จะบรรลุผลลัพธ์บางอย่าง 得 (de) สำหรับความเป็นไปได้, 不 (bù) สำหรับความเป็นไปไม่ได้]', examples: [
                    { chinese: '这个字我写得出来。', pinyin: 'Zhège zì wǒ xiě de chūlái.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ตัวอักษรนี้ฉันเขียนได้ (สำเร็จ)]' },
                    { chinese: '饭太多了，我吃不完。', pinyin: 'Fàn tài duō le, wǒ chī bu wán.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ข้าวเยอะเกินไป ฉันกินไม่หมด]' }
                ]},
                { id: 'hsk4-bian', pattern: 'Verb + 遍', explanation: '[คำอธิบายภาษาไทย: บ่งบอกการเสร็จสิ้นของการกระทำตั้งแต่ต้นจนจบ ครอบคลุมทุกส่วนหรือทุกครั้ง]', examples: [
                    { chinese: '我把这本书看了一遍。', pinyin: 'Wǒ bǎ zhè běn shū kàn le yī biàn.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันอ่านหนังสือเล่มนี้จบไปหนึ่งรอบ]' },
                    { chinese: '请你再说一遍。', pinyin: 'Qǐng nǐ zài shuō yī biàn.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: กรุณาพูดอีกครั้ง (ทั้งประโยค)]' }
                ]},
                { id: 'hsk4-duibulaisuo', pattern: 'A 对 B 来说', explanation: '[คำอธิบายภาษาไทย: สำหรับ A ในมุมมองของ B; สำหรับ A, จากมุมมองของ B ใช้เพื่อแนะนำมุมมอง]', examples: [
                    { chinese: '对我来说，学汉语很有趣。', pinyin: 'Duì wǒ lái shuō, xué Hànyǔ hěn yǒuqù.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: สำหรับฉัน การเรียนภาษาจีนน่าสนใจมาก]' },
                    { chinese: '对学生来说，考试很重要。', pinyin: 'Duì xuéshēng lái shuō, kǎoshì hěn zhòngyào.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: สำหรับนักเรียน การสอบสำคัญมาก]' }
                ]},
                { id: 'hsk4-jiran-jiu', pattern: '既然...就...', explanation: '[คำอธิบายภาษาไทย: ในเมื่อ...ก็... ใช้เพื่อบ่งบอกว่าเมื่อสถานการณ์บางอย่างมีอยู่ การกระทำหรือผลลัพธ์บางอย่างควรตามมา]', examples: [
                    { chinese: '既然你来了，就多玩一会儿吧。', pinyin: 'Jìrán nǐ lái le, jiù duō wán yīhuìr ba.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ในเมื่อคุณมาแล้ว ก็เล่นต่ออีกหน่อยเถอะ]' },
                    { chinese: '既然决定了，就不要后悔。', pinyin: 'Jìrán juédìng le, jiù bùyào hòuhuǐ.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ในเมื่อตัดสินใจแล้ว ก็อย่าเสียใจเลย]' }
                ]},
                { id: 'hsk4-fouze', pattern: '否则', explanation: '[คำอธิบายภาษาไทย: มิฉะนั้น; ถ้าไม่ ใช้เพื่อแนะนำผลที่ตามมาหากเงื่อนไขก่อนหน้าไม่เป็นไปตามนั้น]', examples: [
                    { chinese: '你必须努力学习，否则会挂科。', pinyin: 'Nǐ bìxū nǔlì xuéxí, fǒuzé huì guàkē.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: คุณต้องตั้งใจเรียน มิฉะนั้นจะสอบตก]' },
                    { chinese: '快点走，否则会迟到。', pinyin: 'Kuài diǎn zǒu, fǒuzé huì chídào.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: รีบไปหน่อย มิฉะนั้นจะสาย]' }
                ]},
                { id: 'hsk4-tongguo', pattern: '通过', explanation: '[คำอธิบายภาษาไทย: ผ่าน; โดยวิธีการ; ผ่าน (การทดสอบ)]', examples: [
                    { chinese: '通过努力，他成功了。', pinyin: 'Tōngguò nǔlì, tā chénggōng le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ด้วยความพยายาม เขาประสบความสำเร็จ]' },
                    { chinese: '他通过了考试。', pinyin: 'Tā tōngguò le kǎoshì.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาผ่านการสอบแล้ว]' }
                ]},
                { id: 'hsk4-youyu', pattern: '由于', explanation: '[คำอธิบายภาษาไทย: เนื่องจาก; เพราะว่า ใช้เพื่อระบุเหตุผลหรือสาเหตุของบางสิ่งบางอย่าง มักตามด้วยผลที่ตามมา]', examples: [
                    { chinese: '由于下雨，比赛取消了。', pinyin: 'Yóuyú xià yǔ, bǐsài qǔxiāo le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เนื่องด้วยฝนตก การแข่งขันจึงถูกยกเลิก]' },
                    { chinese: '由于工作忙，他没有时间休息。', pinyin: 'Yóuyú gōngzuò máng, tā méiyǒu shíjiān xiūxi.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เนื่องจากงานยุ่ง เขาจึงไม่มีเวลาพักผ่อน]' }
                ]},
                { id: 'hsk4-conger', pattern: '从而', explanation: '[คำอธิบายภาษาไทย: ดังนั้น; ด้วยเหตุนี้ ใช้เพื่อแนะนำผลลัพธ์หรือผลที่ตามมาของการกระทำหรือสถานการณ์ก่อนหน้า]', examples: [
                    { chinese: '他努力学习，从而取得了进步。', pinyin: 'Tā nǔlì xuéxí, cóng\'ér qǔdé le jìnbù.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาตั้งใจเรียน ดังนั้นจึงมีความก้าวหน้า]' },
                    { chinese: '增加收入，从而提高生活水平。', pinyin: 'Zēngjiā shōurù, cóng\'ér tígāo shēnghuó shuǐpíng.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เพิ่มรายได้ ดังนั้นจึงยกระดับคุณภาพชีวิต]' }
                ]},
                { id: 'hsk4-zhiyu', pattern: '至于', explanation: '[คำอธิบายภาษาไทย: ส่วน; สำหรับ ใช้เพื่อแนะนำหัวข้ออื่นหรือเปลี่ยนประเด็น]', examples: [
                    { chinese: '我喜欢旅游，至于去哪儿，还没决定。', pinyin: 'Wǒ xǐhuān lǚyóu, zhìyú qù nǎr, hái méi juédìng.', english: '[คำแปลภาษาไทยของประประโยคตัวอย่าง: ฉันชอบท่องเที่ยว ส่วนจะไปไหน ยังไม่ได้ตัดสินใจ]' },
                    { chinese: '他已经很努力了，至于结果，就看运气吧。', pinyin: 'Tā yǐjīng hěn nǔlì le, zhìyú jiéguǒ, jiù kàn yùnqì ba.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาพยายามมากแล้ว ส่วนผลลัพธ์ ก็ขึ้นอยู่กับโชคเถอะ]' }
                ]},
                { id: 'hsk4-yibian', pattern: '以便', explanation: '[คำอธิบายภาษาไทย: เพื่อให้; เพื่อที่จะ ใช้เพื่อบ่งบอกวัตถุประสงค์]', examples: [
                    { chinese: '请把门关上，以便保持安静。', pinyin: 'Qǐng bǎ mén guānshàng, yǐbiàn bǎochí ānjìng.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: กรุณาปิดประตู เพื่อให้เงียบสงบ]' },
                    { chinese: '我早点起床，以便赶上火车。', pinyin: 'Wǒ zǎodiǎn qǐchuáng, yǐbiàn gǎnshàng huǒchē.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันตื่นเช้า เพื่อให้ทันรถไฟ]' }
                ]},
                { id: 'hsk4-chufei-fouze', pattern: '除非...否则...', explanation: '[คำอธิบายภาษาไทย: เว้นแต่...มิฉะนั้น... ใช้เพื่อระบุเงื่อนไขที่ต้องเป็นไปตามนั้น มิฉะนั้นจะเกิดผลลัพธ์เชิงลบตามมา]', examples: [
                    { chinese: '除非你告诉我，否则我不会知道。', pinyin: 'Chúfēi nǐ gàosù wǒ, fǒuzé wǒ bù huì zhīdào.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เว้นแต่คุณจะบอกฉัน มิฉะนั้นฉันจะไม่รู้]' },
                    { chinese: '除非下雨，否则我们明天去公园。', pinyin: 'Chúfēi xià yǔ, fǒuzé wǒmen míngtiān qù gōngyuán.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เว้นแต่ฝนตก มิฉะนั้นพรุ่งนี้เราจะไปสวนสาธารณะ]' }
                ]},
                { id: 'hsk4-jiujing', pattern: '究竟', explanation: '[คำอธิบายภาษาไทย: ท้ายที่สุด; ในที่สุด; แท้จริงแล้ว ใช้ในคำถามเพื่อหาข้อสรุปหรือเน้นคำถาม]', examples: [
                    { chinese: '你究竟想说什么？', pinyin: 'Nǐ jiūjìng xiǎng shuō shénme？', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: คุณต้องการจะพูดอะไรกันแน่]' },
                    { chinese: '这件事究竟是谁做的？', pinyin: 'Zhè jiàn shì jiūjìng shì shéi zuò de？', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เรื่องนี้ใครเป็นคนทำกันแน่]' }
                ]},
                { id: 'hsk4-guoran', pattern: '果然', explanation: '[คำอธิบายภาษาไทย: เป็นไปตามคาด; จริงๆ ด้วย บ่งบอกว่าบางสิ่งเกิดขึ้นตามที่คาดการณ์ไว้]', examples: [
                    { chinese: '他果然来了。', pinyin: 'Tā guǒrán lái le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขามาจริงๆ ด้วย]' },
                    { chinese: '天气预报说今天有雨，果然下雨了。', pinyin: 'Tiānqì yùbào shuō jīntiān yǒu yǔ, guǒrán xià yǔ le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: พยากรณ์อากาศบอกว่าวันนี้ฝนจะตก แล้วก็ตกจริงๆ ด้วย]' }
                ]},
                { id: 'hsk4-shenzhi', pattern: '甚至', explanation: '[คำอธิบายภาษาไทย: แม้แต่; ถึงขนาดที่ว่า ใช้เพื่อเน้นตัวอย่างที่รุนแรงหรือผลที่ตามมา]', examples: [
                    { chinese: '他太忙了，甚至没有时间吃饭。', pinyin: 'Tā tài máng le, shènzhì méiyǒu shíjiān chīfàn.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขายุ่งมาก แม้แต่เวลาจะกินข้าวก็ไม่มี]' },
                    { chinese: '这个问题很简单，甚至连孩子都知道。', pinyin: 'Zhège wèntí hěn jiǎndān, shènzhì lián háizi dōu zhīdào。', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ปัญหาที่ง่ายขนาดนี้ แม้แต่เด็กก็ยังรู้]' }
                ]},
                { id: 'hsk4-xiande', pattern: '显得', explanation: '[คำอธิบายภาษาไทย: ดูเหมือน; ปรากฏว่า ใช้เพื่ออธิบายว่าบางสิ่งหรือบางคนดูเป็นอย่างไร]', examples: [
                    { chinese: '他今天显得很高兴。', pinyin: 'Tā jīntiān xiǎnde hěn gāoxìng.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: วันนี้เขาดูมีความสุขมาก]' },
                    { chinese: '这件衣服显得你很瘦。', pinyin: 'Zhè jiàn yīfu xiǎnde nǐ hěn shòu.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เสื้อตัวนี้ทำให้คุณดูผอม]' }
                ]},
                { id: 'hsk4-xingkui', pattern: '幸亏', explanation: '[คำอธิบายภาษาไทย: โชคดีที่; โชคยังดีที่ ใช้เพื่อแสดงความขอบคุณสำหรับผลลัพธ์ที่ดี]', examples: [
                    { chinese: '幸亏你提醒我，否则我就忘了。', pinyin: 'Xìngkuī nǐ tíxǐng wǒ, fǒuzé wǒ jiù wàng le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: โชคดีที่คุณเตือนฉัน มิฉะนั้นฉันคงลืมไปแล้ว]' },
                    { chinese: '幸亏下雨了，天气才凉快。', pinyin: 'Xìngkuī xià yǔ le, tiānqì cái liángkuai.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: โชคดีที่ฝนตก อากาศถึงได้เย็นสบาย]' }
                ]},
                { id: 'hsk4-bijing', pattern: '毕竟', explanation: '[คำอธิบายภาษาไทย: ท้ายที่สุด; โดยสรุป ใช้เพื่อเน้นประเด็นหรือระบุสถานการณ์ที่แท้จริง]', examples: [
                    { chinese: '他毕竟是孩子，你应该原谅他。', pinyin: 'Tā bìjìng shì háizi, nǐ yīnggāi yuánliàng tā.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ท้ายที่สุดเขาก็เป็นเด็ก คุณควรให้อภัยเขา]' },
                    { chinese: '这件事毕竟是他的错。', pinyin: 'Zhè jiàn shì bìjìng shì tā de cuò.', english: '[คำแปลภาษาไทยของประประโยคตัวอย่าง: ท้ายที่สุดเรื่องนี้ก็เป็นความผิดของเขา]' }
                ]},
                { id: 'hsk4-fanzheng', pattern: '反正', explanation: '[คำอธิบายภาษาไทย: อย่างไรก็ตาม; ไม่ว่าอย่างไรก็ตาม ใช้เพื่อบ่งบอกว่าสถานการณ์จะไม่เปลี่ยนแปลงไม่ว่าจะเกิดอะไรขึ้น หรือเพื่อแสดงความคิดเห็นที่แข็งกร้าว]', examples: [
                    { chinese: '反正我也没事，就陪你去吧。', pinyin: 'Fǎnzhèng wǒ yě méi shì, jiù péi nǐ qù ba.', english: '[คำแปลภาษาไทยของประประโยคตัวอย่าง: อย่างไรก็ตามฉันก็ไม่มีอะไรทำ ไปเป็นเพื่อนคุณก็ได้]' },
                    { chinese: '反正他不会同意的。', pinyin: 'Fǎnzhèng tā bù huì tóngyì de.', english: '[คำแปลภาษาไทยของประประโยคตัวอย่าง: อย่างไรก็ตามเขาก็ไม่เห็นด้วยหรอก]' }
                ]},
                { id: 'hsk4-jianzhi', pattern: '简直', explanation: '[คำอธิบายภาษาไทย: อย่างยิ่ง; แทบจะ ใช้เพื่อเน้นย้ำ มักบ่งบอกการพูดเกินจริงหรือความรู้สึกที่รุนแรง]', examples: [
                    { chinese: '这简直是浪费时间。', pinyin: 'Zhè jiǎnzhí shì làngfèi shíjiān.', english: '[คำแปลภาษาไทยของประประโยคตัวอย่าง: นี่เป็นการเสียเวลาโดยสิ้นเชิง]' },
                    { chinese: '他简直不敢相信。', pinyin: 'Tā jiǎnzhí bù gǎn xiāngxìn.', english: '[คำแปลภาษาไทยของประประโยคตัวอย่าง: เขาแทบไม่เชื่อเลย]' }
                ]},
                { id: 'hsk4-wangwang', pattern: '往往', explanation: '[คำอธิบายภาษาไทย: บ่อยครั้ง; โดยปกติ (มักหมายถึงแนวโน้มทั่วไปหรือเหตุการณ์ที่เกิดขึ้นเป็นประจำ)]', examples: [
                    { chinese: '他周末往往在家看书。', pinyin: 'Tā zhōumò wǎngwǎng zài jiā kàn shū.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: วันหยุดสุดสัปดาห์เขามักจะอ่านหนังสืออยู่ที่บ้าน]' },
                    { chinese: '下雨天，路上往往很堵。', pinyin: 'Xià yǔ tiān, lùshàng wǎngwǎng hěn dǔ.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: วันที่ฝนตก ถนนมักจะติดมาก]' }
                ]},
                { id: 'hsk4-zhujian', pattern: '逐渐', explanation: '[คำอธิบายภาษาไทย: ค่อยๆ; ทีละน้อย บ่งบอกการเปลี่ยนแปลงที่ช้าและต่อเนื่อง]', examples: [
                    { chinese: '天气逐渐变冷了。', pinyin: 'Tiānqì zhújiàn biàn lěng le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: อากาศค่อยๆ หนาวขึ้น]' },
                    { chinese: '他的汉语水平逐渐提高了。', pinyin: 'Tā de Hànyǔ shuǐpíng zhújiàn tígāo le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ระดับภาษาจีนของเขาค่อยๆ ดีขึ้น]' }
                ]},
                { id: 'hsk4-buduan', pattern: '不断', explanation: '[คำอธิบายภาษาไทย: อย่างต่อเนื่อง; ไม่หยุดหย่อน เน้นการกระทำหรือสถานะที่ไม่หยุดนิ่ง]', examples: [
                    { chinese: '他不断地学习新知识。', pinyin: 'Tā bùduàn de xuéxí xīn zhīshi.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาเรียนรู้ความรู้ใหม่อย่างต่อเนื่อง]' },
                    { chinese: '雨下得不断。', pinyin: 'Yǔ xià de bùduàn.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฝนตกไม่หยุด]' }
                ]},
                { id: 'hsk4-qinzi', pattern: '亲自', explanation: '[คำอธิบายภาษาไทย: ด้วยตนเอง; ด้วยตัวเอง เน้นว่าการกระทำนั้นทำโดยบุคคลนั้นๆ เอง ไม่ใช่ผ่านคนกลาง]', examples: [
                    { chinese: '他亲自给我打电话。', pinyin: 'Tā qīnzì gěi wǒ dǎ diànhuà.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาโทรหาฉันด้วยตัวเอง]' },
                    { chinese: '老板亲自接待了我们。', pinyin: 'Lǎobǎn qīnzì jiēdài le wǒmen.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เจ้านายต้อนรับพวกเราด้วยตัวเอง]' }
                ]},
                { id: 'hsk4-huxiang', pattern: '互相', explanation: '[คำอธิบายภาษาไทย: ซึ่งกันและกัน; ร่วมกัน บ่งบอกการกระทำที่ตอบโต้กัน]', examples: [
                    { chinese: '他们互相帮助。', pinyin: 'Tāmen hùxiāng bāngzhù.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: พวกเขาช่วยเหลือซึ่งกันและกัน]' },
                    { chinese: '我们应该互相理解。', pinyin: 'Wǒmen yīnggāi hùxiāng lǐjiě.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: พวกเราควรเข้าใจซึ่งกันและกัน]' }
                ]},
                { id: 'hsk4-gezi', pattern: '各自', explanation: '[คำอธิบายภาษาไทย: ตามลำดับ; แต่ละคน หมายถึงบุคคลหรือกลุ่มที่ทำบางสิ่งแยกกันหรือด้วยตนเอง]', examples: [
                    { chinese: '他们各自回家了。', pinyin: 'Tāmen gèzì huí jiā le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: พวกเขาแต่ละคนกลับบ้านไปแล้ว]' },
                    { chinese: '大家各自发表了意见。', pinyin: 'Dàjiā gèzì fābiǎo le yìjiàn.', english: '[คำแปลภาษาไทยของประประโยคตัวอย่าง: ทุกคนแสดงความคิดเห็นของตนเองตามลำดับ]' }
                ]},
                { id: 'hsk4-youqi', pattern: '尤其', explanation: '[คำอธิบายภาษาไทย: โดยเฉพาะอย่างยิ่ง; โดยเฉพาะ ใช้เพื่อเน้นรายการหรือแง่มุมเฉพาะ]', examples: [
                    { chinese: '我喜欢吃水果，尤其是苹果。', pinyin: 'Wǒ xǐhuān chī shuǐguǒ, yóuqí shì píngguǒ.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ฉันชอบกินผลไม้ โดยเฉพาะแอปเปิ้ล]' },
                    { chinese: '他很聪明，尤其是在数学方面。', pinyin: 'Tā hěn cōngmíng, yóuqí shì zài shùxué fāngmiàn.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: เขาฉลาดมาก โดยเฉพาะอย่างยิ่งในด้านคณิตศาสตร์]' }
                ]},
                { id: 'hsk4-zongsuan', pattern: '总算', explanation: '[คำอธิบายภาษาไทย: ในที่สุด; ในที่สุดก็ บ่งบอกว่าสิ่งที่ต้องการหรือคาดหวังได้เกิดขึ้นในที่สุดหลังจากรอคอยหรือพยายามมานาน]', examples: [
                    { chinese: '他总算来了。', pinyin: 'Tā zǒngsuàn lái le.', english: '[คำแปลภาษาไทยของประโยคตัวอย่าง: ในที่สุดเขาก็มาแล้ว]' },
                    { chinese: '我们总算完成了这个任务。', pinyin: 'Wǒmen zǒngsuàn wánchéng le zhège rènwu.', english: '[คำแปลภาษาไทยของประประโยคตัวอย่าง: ในที่สุดเราก็ทำงานนี้เสร็จแล้ว]' }
                ]},
            ]
        };

        function App() {
            const [currentLevel, setCurrentLevel] = useState('hsk1');
            const [currentDeck, setCurrentDeck] = useState([]);
            const [currentIndex, setCurrentIndex] = useState(0);
            const [showExplanation, setShowExplanation] = useState(true);
            const [showExamples, setShowExamples] = useState(true);
            const [llmOutput, setLlmOutput] = useState('');
            const [isLoadingLlm, setIsLoadingLlm] = useState(false);

            // Filter and set the current deck based on level
            const updateCurrentDeck = useCallback(() => {
                const levelData = grammarData[currentLevel] || [];
                // Shuffle the filtered deck
                for (let i = levelData.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [levelData[i], levelData[j]] = [levelData[j], levelData[i]];
                }
                setCurrentDeck(levelData);
                setCurrentIndex(0); // Reset index when deck changes
                setLlmOutput(''); // Clear LLM output
            }, [currentLevel]);

            // Effect to update deck when level changes
            useEffect(() => {
                updateCurrentDeck();
            }, [currentLevel, updateCurrentDeck]);

            // Render the current grammar card
            const renderCard = useCallback(() => {
                if (currentDeck.length === 0) {
                    return (
                        <div className="flex flex-col items-center justify-center h-full text-center text-gray-500">
                            <p className="text-xl">No grammar points in this selection.</p>
                        </div>
                    );
                }

                const grammar = currentDeck[currentIndex];

                return (
                    <div className="relative w-full h-full flex flex-col items-center justify-center p-6 bg-white rounded-2xl shadow-lg border border-gray-200">
                        <div className="absolute top-4 left-4 text-sm text-teal-600 font-medium">
                            {grammar.category}
                        </div>
                        <h2 className="text-4xl md:text-5xl font-bold text-teal-800 mb-4">{grammar.pattern}</h2>

                        {showExplanation && (
                            <div className="text-center mb-4">
                                <h3 className="text-xl font-semibold text-gray-700">Explanation:</h3>
                                <p className="text-lg text-gray-600 mt-2">{grammar.explanation}</p>
                            </div>
                        )}

                        {showExamples && (
                            <div className="text-center mt-4">
                                <h3 className="text-xl font-semibold text-gray-700">Examples:</h3>
                                {grammar.examples.map((ex, idx) => (
                                    <div key={idx} className="mt-2 text-left">
                                        <p className="text-lg text-gray-800 font-medium">{ex.chinese}</p>
                                        <p className="text-md text-gray-600">{ex.pinyin}</p>
                                        <p className="text-md text-gray-500 italic">{ex.english}</p>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                );
            }, [currentDeck, currentIndex, showExplanation, showExamples]);

            // Navigation functions
            const nextCard = () => {
                if (currentDeck.length === 0) return;
                setCurrentIndex((prevIndex) => (prevIndex + 1) % currentDeck.length);
                setLlmOutput(''); // Clear LLM output on navigation
            };

            const prevCard = () => {
                if (currentDeck.length === 0) return;
                setCurrentIndex((prevIndex) => (prevIndex - 1 + currentDeck.length) % currentDeck.length);
                setLlmOutput(''); // Clear LLM output on navigation
            };

            // Shuffle the current deck
            const shuffleDeck = useCallback(() => {
                updateCurrentDeck(); // Re-filters and shuffles
            }, [updateCurrentDeck]);

            // LLM Integration for more examples
            const getMoreExamples = async () => {
                setIsLoadingLlm(true);
                setLlmOutput('Loading more examples...');
                const currentGrammar = currentDeck[currentIndex];
                // Note: The prompt is still in English for the LLM to understand and generate.
                // The output will then be displayed as raw text.
                const prompt = `Provide 2-3 more example sentences in Chinese using the grammar pattern '${currentGrammar.pattern}' (meaning: '${currentGrammar.explanation}'). For each example, include its Pinyin and Thai translation. Format each example on a new line as: 'Chinese Sentence\nPinyin\nThai Translation\nEnglish structure of tense'.`;

                try {
                    let chatHistory = [];
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                    const payload = { contents: chatHistory };
                    const apiKey = "AIzaSyBKY_nSMwqW-lJr9jpPpDF6Czcuji6MnLc"; // Injected API key
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        setLlmOutput(text.replace(/\n/g, '<br>'));
                    } else {
                        setLlmOutput('Failed to generate examples. Please try again.');
                    }
                } catch (error) {
                    console.error("Error fetching LLM examples:", error);
                    setLlmOutput('Error generating examples. Please check your connection.');
                } finally {
                    setIsLoadingLlm(false);
                }
            };

            // Keyboard navigation
            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (e.key === 'ArrowRight') {
                        nextCard();
                    } else if (e.key === 'ArrowLeft') {
                        prevCard();
                    }
                };
                document.addEventListener('keydown', handleKeyDown);
                return () => document.removeEventListener('keydown', handleKeyDown);
            }, [nextCard, prevCard]);

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex flex-col items-center p-4 font-sans text-gray-800 w-full">
                    <div className="w-full max-w-2xl flex justify-between items-center mb-6">
                        <h1 className="text-3xl font-extrabold text-indigo-800 text-center flex-grow">
                            Chinese Grammar Flashcards
                        </h1>
                        <a href="index.html" className="ml-4 py-2 px-4 bg-white text-indigo-700 font-semibold rounded-lg shadow-sm border border-indigo-300 hover:bg-indigo-50 hover:border-indigo-400 transition-colors duration-200">
                            Go to Home
                        </a>
                    </div>

                    <div className="flex flex-wrap justify-center gap-2 mb-6">
                        {['hsk1', 'hsk2', 'hsk3', 'hsk4'].map(level => (
                            <button
                                key={level}
                                onClick={() => setCurrentLevel(level)}
                                className={`py-2 px-4 rounded-full font-semibold transition-all duration-200 ease-in-out
                                    ${currentLevel === level ? 'bg-indigo-600 text-white shadow-md' : 'bg-white text-indigo-700 border border-indigo-300 hover:bg-indigo-50 hover:border-indigo-400'}`}
                            >
                                {level.toUpperCase()} Grammar
                            </button>
                        ))}
                    </div>

                    <div className="flex flex-col sm:flex-row items-center justify-between w-full max-w-2xl mb-4 gap-3">
                        <button
                            onClick={shuffleDeck}
                            className="w-full sm:w-auto flex-grow bg-white text-indigo-700 font-semibold py-2 px-4 rounded-lg shadow-sm border border-gray-300 hover:bg-gray-50 transition-colors duration-200"
                        >
                            Shuffle Deck
                        </button>
                    </div>

                    <div className="w-full max-w-2xl h-[450px] md:h-[500px] mb-6">
                        {renderCard()}
                    </div>

                    <div className="text-center text-gray-600 font-medium mb-6">
                        {currentDeck.length > 0 ? `${currentIndex + 1} / ${currentDeck.length}` : '0 / 0'}
                    </div>

                    <div className="grid grid-cols-2 gap-4 w-full max-w-2xl mb-4">
                        <button
                            onClick={() => setShowExplanation(!showExplanation)}
                            className="bg-blue-500 text-white font-bold py-3 px-4 rounded-lg shadow-md hover:bg-blue-600 transition-colors duration-200"
                        >
                            {showExplanation ? 'Hide Explanation' : 'Show Explanation'}
                        </button>
                        <button
                            onClick={() => setShowExamples(!showExamples)}
                            className="bg-purple-500 text-white font-bold py-3 px-4 rounded-lg shadow-md hover:bg-purple-600 transition-colors duration-200"
                        >
                            {showExamples ? 'Hide Examples' : 'Show Examples'}
                        </button>
                    </div>

                    <div className="w-full max-w-2xl mb-4">
                        <button
                            onClick={getMoreExamples}
                            disabled={isLoadingLlm || currentDeck.length === 0}
                            className="w-full bg-green-600 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:bg-green-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
                        >
                            {isLoadingLlm ? 'Generating Examples...' : '✨ Get More Examples (AI)'}
                        </button>
                        {llmOutput && (
                            <div className="mt-4 p-4 bg-gray-50 border border-gray-200 rounded-lg text-gray-700 text-sm leading-relaxed">
                                <h3 className="font-semibold text-base mb-2">AI Generated Examples:</h3>
                                <p dangerouslySetInnerHTML={{ __html: llmOutput }}></p>
                            </div>
                        )}
                    </div>

                    <div className="grid grid-cols-2 gap-4 w-full max-w-2xl">
                        <button
                            onClick={prevCard}
                            disabled={currentDeck.length === 0}
                            className="bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg shadow-md hover:bg-indigo-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
                        >
                            Previous
                        </button>
                        <button
                            onClick={nextCard}
                            disabled={currentDeck.length === 0}
                            className="bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg shadow-md hover:bg-indigo-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
                        >
                            Next
                        </button>
                    </div>
                </div>
            );
        }

        // Mount the React App
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>

